(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{34:function(e,t,a){e.exports=a(53)},40:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),l=a.n(r),i=a(3),o=a.n(i),s=a(9),m=a(4),u=a(12),d=(a(40),a(7)),h=Object(d.withNaming)({e:"_",m:"__",v:"-"})("Header","Banner"),p=function(e){var t;return t=void 0===e.class?"Header_Banner Header_Banner__color-default":h(e.class),c.a.createElement("header",{className:"Header"},c.a.createElement("div",{className:"Header_Content"},e.link?c.a.createElement(m.b,{to:e.link},c.a.createElement("h1",{className:t},e.text)):c.a.createElement("h1",{className:t},e.text),e.children))},_=Object(d.withNaming)({e:"_",m:"__",v:"-"})("Button"),g=function(e){var t;return t=void 0===e.style?"Button Button__color-control Button__padding-control Button__height-default":_(e.style),c.a.createElement("button",{className:t,onClick:e.onClick},e.children)},b=Object(d.withNaming)({e:"_",m:"__",v:"-"})("Text"),f=function(e){var t;return t=void 0===e.style?"Text":b(e.style),c.a.createElement("span",{className:t},e.children)},x=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"Logo"},c.a.createElement("img",{className:"Logo_Img",src:"/icon/logo.svg",alt:"LOGO"}),c.a.createElement("p",{className:"Logo_Text"},"Configure repository connection and synchronization settings"),c.a.createElement(m.b,{to:"/settings"},c.a.createElement(g,{style:{color:"action",padding:"action"}},c.a.createElement(f,{style:{size:"m",lineHeight:"xxxxl",weight:"small",color:"default"}},"Open settings")))))},E=Object(d.withNaming)({e:"_",m:"__",v:"-"})("Icon"),v=function(e){var t;return t=void 0===e.style?"Icon":E(e.style),c.a.createElement("span",{className:t})},N=a(2),y=function(){return"/"!==Object(N.c)((function(e){return e.setting}))?c.a.createElement(u.a,{to:"/build"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{text:"School CI server"},c.a.createElement(m.b,{to:"/settings"},c.a.createElement(g,{style:{color:"control",padding:"control",height:"default"}},c.a.createElement(v,{style:{size:"xl",img:"control"}}),c.a.createElement(f,{style:{size:"m",lineHeight:"xxl",weight:"small",color:"default",hide:"on"}},"Settings")))),c.a.createElement("div",{className:"Content Content__center-on"},c.a.createElement(x,null)))},O=a(31),w=a(11),j=function(e){var t=e.header,a=e.descripton,n=e.children,r=e.name,l=e.formRef,i=e.method;return c.a.createElement("form",{className:"Form",name:r,ref:l,method:i,onSubmit:function(e){return e.preventDefault()},onClick:function(e){return e.preventDefault()}},c.a.createElement("h2",{className:"Form_H2"},t),c.a.createElement("p",{className:"Form_Description"},a),n)},T=Object(d.withNaming)({e:"_",m:"__",v:"-"})("ButtonsField"),C=function(e){var t;return t=void 0===e.style?"ButtonsField":T(e.style),c.a.createElement("div",{className:t},e.children)},k=a(32),I=a.n(k),H=function(e){var t=Object(n.useRef)(null),a=e.bind?c.a.createElement("span",{className:"Input_Bind"}," *"):"";return void 0!==e.textMask&&Array.isArray(e.textMask)?c.a.createElement("div",{className:"Input Input__flex-active"},c.a.createElement("p",{className:"Input_Head Input_Head__indent-none Input_Head__indent-rigth"},e.head),c.a.createElement("div",{className:"Input_Field  Input_Field__sizeWidth-small Input_Field__position-rigth"},c.a.createElement(I.a,{mask:e.textMask,className:"Input_Input Input_Input__sizeWidth-small",placeholder:e.placeholder,id:e.id,name:e.name,defaultValue:e.value,placeholderChar:"\u2000"})),void 0!==e.span?c.a.createElement("span",{className:"Input_Span"},e.span):""):c.a.createElement("div",{className:"Input"},c.a.createElement("p",{className:"Input_Head"},e.head||"",a),c.a.createElement("div",{className:"Input_Field"},c.a.createElement("input",{className:"Input_Input",type:e.type,placeholder:e.placeholder,name:e.name,id:e.id,defaultValue:e.value,ref:t}),c.a.createElement(g,{style:{color:"close"},onClick:function(e){t.current.value=""}},c.a.createElement(v,{style:{size:"xs",img:"close"}}))),void 0!==e.span?c.a.createElement("span",{className:"Input_Span"},e.span):"")},z="http://localhost:3000",B=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440\u0442","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d\u044c","\u0438\u044e\u043b\u044c","\u0430\u0432\u0433","\u0441\u0435\u043d\u0442","\u043e\u043a\u0442","\u043d\u043e\u044f\u0431","\u0434\u0435\u043a"];var S=function(){var e=Object(u.g)(),t=Object(N.b)(),a=Object(n.useState)(""),r=Object(w.a)(a,2),l=r[0],i=r[1],m=Object(n.useRef)(null);Object(n.useEffect)((function(){document.title="Settings"}),[]);var d=function(){var a=Object(s.a)(o.a.mark((function a(n){var c,r,l,s,u,d,h,p,_,g,b;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=n.currentTarget,r=c.nextSibling,c.setAttribute("disabled","disabled"),r.setAttribute("disabled","disabled"),a.prev=4,l=new FormData(m.current),s={},u=Object(O.a)(l.entries()),a.prev=8,u.s();case 10:if((d=u.n()).done){a.next=20;break}if(h=Object(w.a)(d.value,2),p=h[0],_=h[1],"repoName"!==p&&"buildCommand"!==p||""!==_){a.next=17;break}return i("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"),c.removeAttribute("disabled"),r.removeAttribute("disabled"),a.abrupt("return");case 17:s[p]=_;case 18:a.next=10;break;case 20:a.next=25;break;case 22:a.prev=22,a.t0=a.catch(8),u.e(a.t0);case 25:return a.prev=25,u.f(),a.finish(25);case 28:return i(""),a.next=31,fetch("".concat(z,"/api/settings"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});case 31:return g=a.sent,console.log(g),a.next=35,g.json();case 35:if((b=a.sent).success){a.next=41;break}return i(b.error),c.removeAttribute("disabled"),r.removeAttribute("disabled"),a.abrupt("return");case 41:t({type:"settingsOn"}),e.push("/build"),a.next=50;break;case 45:a.prev=45,a.t1=a.catch(4),i("\u041e\u0439\u0435\u0439\u0435\u0439\u0435\u0439\u0435\u0439 \u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0447\u0442\u043e \u0442\u043e \u0441\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c"),c.removeAttribute("disabled"),r.removeAttribute("disabled");case 50:c.removeAttribute("disabled"),r.removeAttribute("disabled");case 52:case"end":return a.stop()}}),a,null,[[4,45],[8,22,25,28]])})));return function(e){return a.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{text:"School CI server"}),c.a.createElement("div",{className:"Content"},c.a.createElement(j,{header:"Settings",descripton:"Configure repository connection and synchronization settings.",name:"settings",method:"post",formRef:m},c.a.createElement(H,{head:"GitHub repository",type:"text",placeholder:"user-name/repo-name",name:"repoName",bind:!0}),c.a.createElement(H,{head:"Build command",type:"text",placeholder:"npm ci && npm run build",name:"buildCommand",bind:!0}),c.a.createElement(H,{head:"Main branch",type:"text",placeholder:"master",name:"mainBranch"}),c.a.createElement(H,{head:"Synchronize every",placeholder:"10",name:"period",span:"minutes",textMask:[/\d/,/\d/]}),c.a.createElement(f,{style:{size:"l",weight:"normal",lineHeight:"xxl",color:"red"}},l),c.a.createElement(C,{style:{indent:"topXl"}},c.a.createElement(g,{style:{indentRigth:"s",indentBottom:"s",height:"action",color:"action",padding:"action"},onClick:d},c.a.createElement(f,{style:{size:"m",lineHeight:"xxxxl",weight:"small",color:"default"}},"Save")),c.a.createElement(g,{style:{color:"control",padding:"action",height:"action",indentBottom:"xl"},onClick:function(){e.goBack()}},c.a.createElement(f,{style:{size:"m",lineHeight:"xxxxl",weight:"small",color:"default"}},"Cancel"))))))},D=Object(d.withNaming)({e:"_",m:"__",v:"-"})("Date"),R=function(e){return c.a.createElement("div",{className:void 0!==e.style?D(e.style):"Date"},c.a.createElement("div",{className:"Date_Day"},c.a.createElement("span",{className:"Icon Icon__indentRigth-xs Icon__size-xs Icon__img-calendar"}),c.a.createElement("span",{className:"Text Text__size-m Text__weight-small Text__lineHeight-l Text__color-secondary Text__indentRigth-m Date__DinamicColor-on"},e.startDate)),c.a.createElement("div",{className:"Date_Hour"},c.a.createElement("span",{className:"Icon Icon__indentRigth-xs Icon__size-xs Icon__img-clock"}),c.a.createElement("span",{className:"Text Text__size-m Text__weight-small Text__lineHeight-l Text__color-secondary Date__DinamicColor-on"},e.duration)))},L=function(e){var t=function(e){var t=new Date(e),a=t.getDate()||!1;if(!a)return!1;var n=B[t.getMonth()],c=t.getHours();"".concat(c).length<2&&(c="0"+c);var r=t.getMinutes();return"".concat(r).length<2&&(r="0"+r),"".concat(a," ").concat(n,", ").concat(c,":").concat(r)}(e.start),a=function(e){var t=e/36e5^0,a=(e/6e4^0)-60*t,n=(e/1e3^0)-60*a;return t=t>1?"".concat(t," \u0447 "):"",a=a>1?"".concat(a," \u043c\u0438\u043d "):"",t<1?n<1?a:a+n+"\u0441\u0435\u043a":t+a}(e.duration),n="Icon Icon__indentRigth-s Icon__size-default Icon__img-".concat(e.status);return c.a.createElement("div",{className:e.column?"Card Card__indentBottom-s Card__column-on":"Card Card__indentBottom-s"},c.a.createElement("div",{className:"Card_Info Card__flexBasic-80"},c.a.createElement("div",{className:"Card_Build Card_Build__indentBottom-s"},c.a.createElement("div",{className:"Card_Status"},c.a.createElement("span",{className:n}),c.a.createElement("span",{className:"Text Text__size-l Text__weight-normal Text__lineHeight-xl Text__color-green"},"#",e.number)),c.a.createElement("span",{className:"Text Text__indentLeft-xs Text__size-s Text__weight-small Text__lineHeight-xl Text__color-default"},e.commit)),c.a.createElement("div",{className:"Card_Commit Card_Commit__indentLeft-xxl"},c.a.createElement("div",{className:"Card_Branch Card_Branch__indentRigth-l "},c.a.createElement("span",{className:"Icon Icon__indentRigth-xs Icon__size-xs Icon__img-code"}),c.a.createElement("span",{className:"Text Text__indentRigth-xs Text__size-m Text__weight-small Text__lineHeight-l Text__color-default"},e.branch),c.a.createElement("span",{className:"Text Text__indentRigth-xs Text__size-m Text__weight-small Text__lineHeight-l Text__color-hash"},e.hash)),c.a.createElement("div",{className:"Card_User"},c.a.createElement("span",{className:"Icon Icon__indentRigth-xs Icon__size-xs Icon__img-user"}),c.a.createElement("span",{className:"Text Text__size-m Text__weight-small Text__lineHeight-l Text__color-default"},e.author)))),!1===t?"":c.a.createElement(R,{startDate:t,duration:a}))},A=function(e){var t=e.hide,a=Object(n.useRef)(null),r=Object(u.g)(),l=function(){var e=Object(s.a)(o.a.mark((function e(t){var n,c,l,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget,c=n.nextSibling,n.setAttribute("disabled","disabled"),c.setAttribute("disabled","disabled"),e.prev=4,l=new FormData(a.current),e.next=8,fetch("".concat(z,"/api/builds/").concat(l.get("commitHash")),{method:"POST"});case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,console.log(s),r.push("/build/".concat(s.data.id)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0);case 19:n.removeAttribute("disabled"),c.removeAttribute("disabled");case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"PopUp"},c.a.createElement(j,{header:"New Build",descripton:"Enter the commit hash which you want to build.",name:"newBuild",method:"post",formRef:a},c.a.createElement(H,{type:"text",placeholder:"Commit Hash",name:"commitHash"}),c.a.createElement(C,null,c.a.createElement(g,{style:{indentRigth:"s",indentBottom:"s",height:"action",color:"action",padding:"action"},onClick:l},c.a.createElement(f,{style:{size:"m",lineHeight:"xxxxl",weight:"small",color:"default"}},"Run build")),c.a.createElement(g,{onClick:t,style:{color:"close",padding:"action",height:"action",indentBottom:"xl"}},c.a.createElement(f,{style:{size:"m",lineHeight:"xxxxl",weight:"small",color:"default"}},"Cancel")))))},F=function(){var e=Object(N.c)((function(e){return e.repName})),t=Object(N.c)((function(e){return e.buildList})),a=Object(N.b)(),r=Object(n.useState)(""),l=Object(w.a)(r,2),i=l[0],u=l[1],d=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n,c,r,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:0,n=l.length>1&&void 0!==l[1]?l[1]:5,e.prev=2,e.next=5,fetch("".concat(z,"/api/builds?offset=").concat(t,"&limit=").concat(n));case 5:return c=e.sent,e.next=8,c.json();case 8:r=e.sent,a({type:"updateList",build:r.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){document.title="Build List",t.length<1&&d()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{text:e,class:{color:"black",lineHeight:"l"},link:"/build"},c.a.createElement(C,{style:{column:"off"}},c.a.createElement(g,{style:{color:"control",padding:"control",height:"default"},onClick:function(){u(c.a.createElement(A,{hide:function(){return u("")}}))}},c.a.createElement(v,{style:{size:"xl",img:"play"}}),c.a.createElement(f,{style:{size:"m",lineHeight:"xxl",weight:"small",color:"default",hide:"on"}},"Run build")),c.a.createElement(m.b,{to:"/settings"},c.a.createElement(g,{style:{color:"control",indentLeft:"s",height:"default"}},c.a.createElement(v,{style:{size:"xl",img:"control"}}))))),c.a.createElement("div",{className:"Content"},t.map((function(e){return c.a.createElement(m.b,{to:"/build/".concat(e.id),key:e.buildNumber},c.a.createElement(L,{status:e.status,number:e.buildNumber,commit:e.commitMessage,branch:e.branchName,author:e.authorName,hash:e.commitHash.substring(0,7),start:e.start,duration:e.duration}))})),c.a.createElement(C,null,c.a.createElement(g,{style:{color:"control",padding:"action",indentBottom:"xl"},onClick:function(e){return d(t.length)}},c.a.createElement(f,{style:{size:"m",lineHeight:"xxxxl",weight:"small",color:"default"}},"Show more")))),i)},M=a(33),P=new(a.n(M).a)({fg:"#000",bg:"#000"});var X=function(){var e=Object(N.c)((function(e){return e.setting})),t=Object(u.g)();"/build"!==e&&t.push("/");var a=Object(N.c)((function(e){return e.repName})),r=Object(N.c)((function(e){return e.buildDetails})),l=Object(N.b)(),i=Object(u.h)().number,d=function(){var e=Object(s.a)(o.a.mark((function e(a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(z,"/api/builds/").concat(r.commitHash),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,t.push("/build/".concat(c.data.id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){document.title="Build ".concat(i),function(){var e=Object(s.a)(o.a.mark((function e(){var a,n,c,r,s,m,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([fetch("".concat(z,"/api/builds/").concat(i)),fetch("".concat(z,"/api/builds/").concat(i,"/logs"))]);case 3:return a=e.sent,n=Object(w.a)(a,2),c=n[0],r=n[1],e.next=9,Promise.all([c.json(),r.json()]);case 9:s=e.sent,m=Object(w.a)(s,2),u=m[0],d=m[1],u.data.log=d.data,l({type:"updateDetails",build:u.data}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),t.push("/build");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}()()}),[i]),c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{text:a,class:{color:"black",lineHeight:"l"},link:"/build"},c.a.createElement(C,{style:{column:"off"}},c.a.createElement(g,{style:{color:"control",padding:"control",height:"default"},onClick:d},c.a.createElement(v,{style:{size:"xl",img:"rebuild"}}),c.a.createElement(f,{style:{size:"m",lineHeight:"xxl",weight:"small",color:"default",hide:"on"}},"Rebuild")),c.a.createElement(m.b,{to:"/settings"},c.a.createElement(g,{style:{color:"control",indentLeft:"s",height:"default"}},c.a.createElement(v,{style:{size:"xl",img:"control"}}))))),c.a.createElement("div",{className:"Content"},c.a.createElement(L,{status:r.status,number:r.buildNumber,commit:r.commitMessage,branch:r.branchName,author:r.authorName,hash:r.commitHash.substring(0,7),start:r.start,duration:r.duration}),c.a.createElement("div",{className:"Log",dangerouslySetInnerHTML:{__html:P.toHtml(r.log)}})))};var J=function(){var e=Object(N.c)((function(e){return e.setting})),t=Object(N.b)();return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(z,"/checkSettings"));case 3:return a=e.sent,e.next=6,a.json();case 6:void 0!==(n=e.sent).repoName&&(t({type:"settingsOn"}),t({type:"setName",name:n.repoName})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{component:y,exact:!0,path:"/"}),c.a.createElement(u.b,{component:S,exact:!0,path:"/settings"}),c.a.createElement(u.b,{component:F,exact:!0,path:"/build"}),c.a.createElement(u.b,{component:X,exact:!0,path:"/build/:number"}),c.a.createElement(u.b,{path:"*"},c.a.createElement(u.a,{to:e})))),c.a.createElement("footer",{className:"Footer"},c.a.createElement("div",{className:"Footer_Content"},c.a.createElement("div",{className:"Link"},c.a.createElement("a",{className:"Link_ATag",href:"/#"},"Support"),c.a.createElement("a",{className:"Link_ATag",href:"/#"},"Learning")),c.a.createElement("div",{className:"Copyright"},c.a.createElement("p",{className:"Copyright_Text"},"\xa9 2020 Your Name")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(14),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"settingsOn":return"/build";default:return e}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setName":return t.name;default:return e}},G=a(24),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateList":return[].concat(Object(G.a)(e),Object(G.a)(t.build));default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{commitHash:"",log:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateDetails":return t.build;default:return e}},q=Object(U.b)({setting:V,repName:W,buildList:Y,buildDetails:$}),K=Object(U.c)(q,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());K.subscribe((function(){return console.log(K.getState())})),l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N.a,{store:K},c.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.7badc25d.chunk.js.map